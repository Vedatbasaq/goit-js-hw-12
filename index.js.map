{"version":3,"file":"index.js","sources":["../src/js/main.js"],"sourcesContent":["// Axios\nimport axios from 'axios';\n// IziToast\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n// SimpleLightbox\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nlet searchedText,\n  currentPage = 1,\n  totalPages;\n\nconst form = document.querySelector('.gallery-form');\nconst galleryList = document.querySelector('#gallery-list');\nconst loadMoreBtn = document.querySelector('#loadMoreBtn');\n\nconst galleryItem = photoInfo => {\n  const item = document.createElement('li');\n  item.classList.add('gallery-item');\n  item.dataset.source = photoInfo.largeImageURL;\n\n  const itemLink = document.createElement('a');\n  itemLink.classList.add('gallery-link');\n  itemLink.style.color = 'black';\n  itemLink.href = photoInfo.largeImageURL;\n\n  const img = document.createElement('img');\n  img.src = photoInfo.webformatURL;\n  img.alt = photoInfo.tags;\n  img.width = 360;\n  img.height = 200;\n\n  const contentDiv = document.createElement('div');\n  contentDiv.classList.add('content');\n\n  const iLikeDiv = document.createElement('div');\n  iLikeDiv.classList.add('info');\n\n  const iLikeKey = document.createElement('h5');\n  iLikeKey.classList.add('key');\n  iLikeKey.textContent = 'Likes:';\n  iLikeDiv.appendChild(iLikeKey);\n\n  const iLikeValue = document.createElement('p');\n  iLikeValue.classList.add('value');\n  iLikeValue.textContent = photoInfo.likes;\n  iLikeDiv.appendChild(iLikeValue);\n\n  const iViewsDiv = document.createElement('div');\n  iViewsDiv.classList.add('info');\n\n  const iViewsKey = document.createElement('h5');\n  iViewsKey.classList.add('key');\n  iViewsKey.textContent = 'Views:';\n  iViewsDiv.appendChild(iViewsKey);\n\n  const iViewsValue = document.createElement('p');\n  iViewsValue.classList.add('value');\n  iViewsValue.textContent = photoInfo.views;\n  iViewsDiv.appendChild(iViewsValue);\n\n  const iCommentsDiv = document.createElement('div');\n  iCommentsDiv.classList.add('info');\n\n  const iCommentsKey = document.createElement('h5');\n  iCommentsKey.classList.add('key');\n  iCommentsKey.textContent = 'Comments:';\n  iCommentsDiv.appendChild(iCommentsKey);\n\n  const iCommentsValue = document.createElement('p');\n  iCommentsValue.classList.add('value');\n  iCommentsValue.textContent = photoInfo.comments;\n  iCommentsDiv.appendChild(iCommentsValue);\n\n  const iDownloadsDiv = document.createElement('div');\n  iDownloadsDiv.classList.add('info');\n\n  const iDownloadsKey = document.createElement('h5');\n  iDownloadsKey.classList.add('key');\n  iDownloadsKey.textContent = 'Downloads:';\n  iDownloadsDiv.appendChild(iDownloadsKey);\n\n  const iDownloadsValue = document.createElement('p');\n  iDownloadsValue.classList.add('value');\n  iDownloadsValue.textContent = photoInfo.downloads;\n  iDownloadsDiv.appendChild(iDownloadsValue);\n\n  contentDiv.appendChild(iLikeDiv);\n  contentDiv.appendChild(iViewsDiv);\n  contentDiv.appendChild(iCommentsDiv);\n  contentDiv.appendChild(iDownloadsDiv);\n\n  itemLink.appendChild(img);\n  item.appendChild(contentDiv);\n  item.appendChild(itemLink);\n  galleryList.appendChild(item);\n};\n\nlet galleryBox = new SimpleLightbox('.gallery li > a', {\n  captionsData: 'alt',\n  captionDelay: 350,\n});\n\nconst searchPhotos = (search, page) => {\n  return new Promise(async (resolve, reject) => {\n    console.log(`Search: ${search} | Page: ${page}`);\n\n    if (page > totalPages) {\n      currentPage = 1;\n      page = 1;\n    } else {\n      searchedText = search;\n      const pixabayApi = await axios.get('https://pixabay.com/api/', {\n        params: {\n          key: '49404317-b3e2234da46703b9b16558004',\n          q: search,\n          image_type: 'photo',\n          orientation: 'horizontal',\n          safesearch: true,\n          page: page,\n          per_page: 40,\n        },\n      });\n\n      totalPages = Math.ceil(\n        parseFloat(pixabayApi.data.totalHits / pixabayApi.data.hits.length)\n      );\n      console.log(\n        `Searched Photo: ${searchedText} \\nCurrent Page: ${currentPage} \\nTotal Pages: ${totalPages}`\n      );\n\n      if (pixabayApi.data.hits.length === 0) {\n        iziToast.error({\n          position: 'topRight',\n          color: 'red',\n          message:\n            'Sorry, there are no images matching your search query. Please, try again!',\n        });\n      }\n      if (currentPage < totalPages) {\n        loadMoreBtn.style.display = 'block';\n      }\n\n      resolve(pixabayApi);\n    }\n  });\n};\n\nform.addEventListener('submit', async e => {\n  e.preventDefault();\n  currentPage = 1;\n  loadMoreBtn.style.display = 'display';\n  galleryList.innerHTML = '';\n  const search = e.target.elements.search.value;\n  if (search === '') {\n    iziToast.warning({\n      position: 'topRight',\n      message: 'Please enter a search query!',\n    });\n    loadMoreBtn.style.display = 'none';\n    return false;\n  } else {\n    const item = document.createElement('li');\n    item.classList.add('gallery-item');\n\n    const itemLoader = document.createElement('span');\n    itemLoader.classList.add('loader');\n\n    item.appendChild(itemLoader);\n    item.style.textAlign = 'center';\n    item.style.border = 'none';\n    galleryList.appendChild(item);\n    const responsedPhotos = await searchPhotos(search, currentPage);\n    const photos = responsedPhotos.data.hits;\n    galleryList.innerHTML = '';\n    photos.forEach(photo => {\n      galleryItem(photo);\n    });\n    galleryBox.refresh();\n    e.target.reset();\n  }\n});\n\nloadMoreBtn.addEventListener('click', async e => {\n  currentPage++;\n  const responsedPhotos = await searchPhotos(searchedText, currentPage);\n  const photos = responsedPhotos.data.hits;\n\n  photos.forEach(photo => {\n    galleryItem(photo);\n  });\n\n  const galleryItemD = document.querySelector('.gallery img');\n  if (galleryItemD) {\n    const cardHeight = galleryItemD.getBoundingClientRect().height;\n    window.scrollBy({\n      top: cardHeight * 4.3,\n      behavior: 'smooth',\n    });\n  }\n\n  galleryBox.refresh();\n\n  if (currentPage === totalPages) {\n    loadMoreBtn.removeEventListener('click', searchPhotos);\n    iziToast.error({\n      position: 'topRight',\n      color: 'blue',\n      message: \"We're sorry, but you've reached the end of search results!\",\n    });\n    loadMoreBtn.style.display = 'none';\n  }\n});\n"],"names":["searchedText","currentPage","totalPages","form","galleryList","loadMoreBtn","galleryItem","photoInfo","item","itemLink","img","contentDiv","iLikeDiv","iLikeKey","iLikeValue","iViewsDiv","iViewsKey","iViewsValue","iCommentsDiv","iCommentsKey","iCommentsValue","iDownloadsDiv","iDownloadsKey","iDownloadsValue","galleryBox","SimpleLightbox","searchPhotos","search","page","resolve","reject","pixabayApi","axios","iziToast","e","itemLoader","photos","photo","galleryItemD","cardHeight"],"mappings":"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"}